"""集中式知识图谱系统提示词仓库"""

# Phase 1: 主提取提示
MAIN_SYSTEM_PROMPT = """
你是一个专注于知识抽取与知识图谱构建的高级AI系统。
你的专长包括在文本中识别一致的实体指代和有意义的关系。
关键指令：所有关系（谓词）必须不超过3个单词，理想情况为1-2个单词。这是硬性限制。
"""

MAIN_USER_PROMPT = """
你的任务：阅读以下文本（由三个反引号包围）并为每个句子识别所有主谓宾（S-P-O）三元组。
然后生成一个包含这些三元组的JSON数组。

请严格遵守以下规则：

- 实体一致性：在整个文档中使用一致的实体名称。例如，如果"张三"在不同位置被称作"张先生"、"老张"，请统一使用最完整的"张三"形式。
- 原子化术语：提取独立的关键术语（如对象、地点、机构、缩写、人物、病症、概念、情感），避免将多个概念合并为一个术语。
- 统一指代：将代词（他/她/它/他们等）替换为实际指代的实体（若可识别）。
- 成对关系：如果多个术语在同一句子（或语义相关的短段落）中出现有意义的关系，为每对创建一个三元组。
- 关键限制：谓词必须为1-3个汉字，不可超过。保持极度简洁。
- 确保提取所有可能的关系，并以S-P-O形式呈现。
- 标准化术语：相同概念的不同表述（如"人工智能"和"AI"）需统一为最常用形式。
- 所有三元组文本转为小写（人名地名除外）。
- 若提及人物姓名，需补充其所属机构、职业、成就等关系（如发明、著作、头衔等），需符合上下文。

注意事项：
- 实体命名需精准区分相似实体
- 最大化连接性，同一概念使用统一名称
- 结合全文语境识别实体指代
- 所有谓词必须≤3个汉字 - 此为强制要求

输出要求：
- 仅返回JSON数组，不添加任何额外文本
- 每个三元组对象包含"subject"、"predicate"、"object"字段
- 确保JSON格式正确有效

示例输出结构：
[
  {
    "subject": "术语A",
    "predicate": "相关",  // 注意：仅2个汉字
    "object": "术语B"
  },
  {
    "subject": "术语C",
    "predicate": "使用",  // 注意：仅1个汉字
    "object": "术语D"
  }
]

重要提示：仅输出JSON数组（含S-P-O对象），禁止其他内容

待分析文本（位于三个反引号之间）：
"""

# Phase 2: 实体标准化提示
ENTITY_RESOLUTION_SYSTEM_PROMPT = """
你是一位实体标准化专家，专注于知识图谱的实体一致性维护。
"""

def get_entity_resolution_user_prompt(entity_list):
    return f"""
以下是从知识图谱提取的实体列表，可能存在不同表述指向同一实体的情况。

请识别出指向同一概念的实体组，并为每组提供标准化名称。
返回格式为JSON对象，键为标准化名称，值为包含变体的数组。
仅需包含需要标准化的实体。

实体列表：
{entity_list}

示例格式：
{{
  "标准化名称1": ["变体1", "变体2"],
  "标准化名称2": ["变体3", "变体4", "变体5"]
}}
"""

# Phase 3: 社区关系推理提示
RELATIONSHIP_INFERENCE_SYSTEM_PROMPT = """
你是一位知识表示与推理专家。
任务是为知识图谱中孤立的实体社区推断合理关系。
"""

def get_relationship_inference_user_prompt(entities1, entities2, triples_text):
    return f"""
现有知识图谱包含两个孤立实体群：

社区1实体：{entities1}
社区2实体：{entities2}

已知关联关系：
{triples_text}

请推断2-3个跨社区的合理关系。
返回JSON数组格式三元组：

[
  {{
    "subject": "社区1实体",
    "predicate": "推断关系",
    "object": "社区2实体"
  }},
  ...
]

要求：
1. 谓词必须≤3个汉字，优先1-2个字
2. 使用简短明确的短语描述关系
3. 主客体必须为不同实体
"""

# Phase 4: 社区内关系推理提示
WITHIN_COMMUNITY_INFERENCE_SYSTEM_PROMPT = """
你是一位知识表示与推理专家。
任务是为知识图谱中语义相关但未连接的实体推断关系。
"""

def get_within_community_inference_user_prompt(pairs_text, triples_text):
    return f"""
现有知识图谱中存在语义相关但未直接连接的实体对：

候选对：
{pairs_text}

已知关联关系：
{triples_text}

请推断这些实体间的合理关系。
返回JSON数组格式三元组：

[
  {{
    "subject": "实体1",
    "predicate": "推断关系",
    "object": "实体2"
  }},
  ...
]

要求：
1. 谓词必须≤3个汉字，优先1-2个字
2. 使用简短明确的短语描述关系
3. 主客体必须为不同实体
"""